Summer2021-No.94 在openeuler社区孵化生物信息单细胞领域开源应用软件
================================================



Description
--------
[https://gitee.com/openeuler-competition/summer-2021/issues/I3J85G](https://gitee.com/openeuler-competition/summer-2021/issues/I3J85G)

Software Architecture
------------

Here, we report a computational framework that integrated three deep-learning models 
for predicting the likelihood of the interaction between TCR and peptide presented by 
MHC molecules. this server obtained excellent performance on independent testing dataset, 
thereby allowing robust identification of immunogenic T cell epitopes.

Installation
------------

Download package by 
  ```sh
  git clone https://gitlab.summer-ospp.ac.cn/summer2021/210010423.git
  ```
This package can be installed in this ways (Please make sure your python version is 3.7):

    # If needed:
    pip install -r requirements.txt
    #or
    conda install --yes --file requirements.txt

Note the code depends on the `numpy`, `tensorflow` and other packages. So have those
installed first. The build will likely fail if it can't find them. For more information, see:

 + [NumPy](http://www.numpy.org/): Library for efficient matrix math in Python
 + [tensorflow](https://tensorflow.google.cn/): An end-to-end open source machine learning platform in Python
 
 
Contents
--------

data
--------
We collected experimentally verified TCR-pMHC pairs from the VDJdb, IEDB and 
TetTCR-seq dataset for constructing a high-quality benchmark dataset. These peptide-TCR pairs were 
split into training, testing and independent testing datasets with regard to their TCR α- and β-chains 
so that each peptide-TCR pair only existed in one split, in detail as following:  
1)TCRA_train.csv and TRB_Train.csv are the training datasets for constructing and training the models.  
2)TCRA_test.csv and TCRB_test.csv are the testing datasets for testing the constructed models.   
3)TCRA_COVID-19.csv and TCRB_COVID-19.csv are independent testing data for evaluating the performance of 
ensemble classifiers.  
4)TRA-VDJdb_TCR cross-reactivity.rar and TRB_VDJdb_TCR cross-reactivity.rar are used to assess the 
prediction ability of ensemble classifiers for TCR cross-reactivity.  
5)TCRAB_IEDB.csv is used to evaluate the integrated model for predicting the peptide-TCRαβ interaction.  


pca
--------
The folder contains the features generated by full training datasets using PCA encoding method.
we padded each sequence of a pair to the maximum length of 20 and encoded them using Principal 
Component Analysis (PCA) encoding. For each amino acid, we selected the top 20 PCs explained 
over 95% of total data variation and generated different vectors using 8-20 PCs to represent 
its biochemical signatures, respectively.


code
--------
The source code of feature extraction, five-fold cross-validation, model construction and training,
and prediction are deposited in this floder 'code'.
1) The source code in folder 'fold' are used to select the appropriate features by five-fold cross validation.
2) The source code in folder 'train' are used to construct and train the base classifiers.
3) The source code (XXX_Feature_Extraction.py) is used to implement feature extraction.



How to Use
----------

#### Running on GPU or CPU

After you install software,  TensorFlow will be installed along with software. 
Refer to Keras documentation to configure TensorFlow to run on GPU/CPU. 
Note that, if you want to use GPU, you also need to install CUDA and cuDNN; 
refer to their websites for instructions. If you use "conda install tensorflow-gpu" to install TensorFlow. 
CPU is only suitable for predicting not training.


### For advanced users who want to perform training and predicting by using their own data:

#### For custom training:
CPU is only suitable for prediction not training. 
For custom general training using user’s training data:
```sh
python Train_Test_Onehot_Chem_Feature_Extraction.py
python Train_Test_PCA_Feature_Extraction.py
```


The code in Folder /code/fold is then used for 5-fold cross-validation to filter out the best features:
```sh
#example
python CNN_A_fold_onehot.py
```
The code in folder /code/train is then used to filter out the best features for model training

```sh
#example
python CNN_A_ALL_onehot.py
```



